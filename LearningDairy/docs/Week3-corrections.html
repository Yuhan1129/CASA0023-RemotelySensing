<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>CASA0023-LearningDairy - 3&nbsp; Corrections</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Week4-policy.html" rel="next">
<link href="./Week2-portfolio.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Corrections</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">CASA0023-LearningDairy</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction to Remote Sensing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week2-portfolio.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Portfolio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week3-corrections.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Corrections</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week4-policy.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Policy</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week5-GEE.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">GEE</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week6-classification1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Classification1</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week7-classification2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Classification2</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week8-temperature.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Temperature</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Summary</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary"><span class="toc-section-number">3.1</span>  Summary</a>
  <ul class="collapse">
  <li><a href="#correction" id="toc-correction" class="nav-link" data-scroll-target="#correction"><span class="toc-section-number">3.1.1</span>  Correction</a></li>
  <li><a href="#data-joining-and-enhancement" id="toc-data-joining-and-enhancement" class="nav-link" data-scroll-target="#data-joining-and-enhancement"><span class="toc-section-number">3.1.2</span>  Data Joining and Enhancement</a></li>
  </ul></li>
  <li><a href="#application" id="toc-application" class="nav-link" data-scroll-target="#application"><span class="toc-section-number">3.2</span>  Application</a></li>
  <li><a href="#mostly-used-to-describe-radiometrically-and-geometrically-consistent-data-that-include-cloud-and-other-poor-quality-observation-flags-for-filtering-data-prior-to-analysisdwyer2018" id="toc-mostly-used-to-describe-radiometrically-and-geometrically-consistent-data-that-include-cloud-and-other-poor-quality-observation-flags-for-filtering-data-prior-to-analysisdwyer2018" class="nav-link" data-scroll-target="#mostly-used-to-describe-radiometrically-and-geometrically-consistent-data-that-include-cloud-and-other-poor-quality-observation-flags-for-filtering-data-prior-to-analysisdwyer2018"><span class="toc-section-number">4</span>  : <em>mostly used to describe radiometrically and geometrically consistent data that include cloud and other poor-quality observation flags for filtering data prior to analysis<span class="citation" data-cites="dwyer2018">(Dwyer et al. 2018)</span></em></a>
  <ul class="collapse">
  <li><a href="#reflection" id="toc-reflection" class="nav-link" data-scroll-target="#reflection"><span class="toc-section-number">4.1</span>  Reflection</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Corrections</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="summary" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="summary"><span class="header-section-number">3.1</span> Summary</h2>
<section id="correction" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="correction"><span class="header-section-number">3.1.1</span> Correction</h3>
<section id="geometric-correction" class="level4" data-number="3.1.1.1">
<h4 data-number="3.1.1.1" class="anchored" data-anchor-id="geometric-correction"><span class="header-section-number">3.1.1.1</span> Geometric Correction</h4>
<p><strong>Causes:</strong> view angle(off-nadir, off directly down), topography, wind, rotation of the earth</p>
<p><strong>Solution:</strong></p>
<ul>
<li>Steps:</li>
</ul>
<ol type="1">
<li><p>Find Ground Control Points(GCP) to match known points in the incorrect image and a reference correct dataset.</p></li>
<li><p>Then use a transformation algorithm to model the actual coordinates, like linear regression with distorted x or y as the dependent or independent.</p></li>
<li><p>Later, plot these and minimize the RMSE, whereas the lower RMSE the better model fits.</p></li>
<li><p>Last, resample the final raster because the value of pixels in raster might shift slightly, and the common resample data including Nearest Neighbor, Linear, Cubic and Cubic Spline.</p></li>
</ol>
<ul>
<li>Two Methods:</li>
</ul>
<p><u><em>Forward Mapping</em></u>: Input to output</p>
<p>There would be points in the incorrect map falling outside the boundary of the correct map.</p>
<p><u><em>Backward Mapping</em></u>: Output to input</p>
<p>This method completely avoids problems with gaps and overlaps.</p>
</section>
<section id="atmospheric-correction" class="level4" data-number="3.1.1.2">
<h4 data-number="3.1.1.2" class="anchored" data-anchor-id="atmospheric-correction"><span class="header-section-number">3.1.1.2</span> Atmospheric Correction</h4>
<p><strong>Causes:</strong> atmospheric scattering and topographic attenuation</p>
<p>Tips: There are both necessary and unnecessary atmospheric corrections. We only need to do the necessary atmospheric corrections.</p>
<p><strong>Solutions:</strong></p>
<ul>
<li>Types:</li>
</ul>
<ol type="1">
<li><p>Relative correction: Avoid the evaluation of atmospheric components of any kind<span class="citation" data-cites="livingt">(<a href="references.html#ref-livingt" role="doc-biblioref"><span>“Living Textbook | Relative Atmospheric Correction | by ITC, University of Twente,”</span> n.d.</a>)</span>.</p>
<ul>
<li><p>Normalize intensities of different bands within a single image</p></li>
<li><p>Normalize intensities of bands from many dates to one date</p></li>
<li><p>Dark object subtraction or histogram adjustment</p></li>
<li><p>Pseudo-invariant Features(PIFS)</p></li>
</ul></li>
<li><p>Absolute correction:</p>
<ul>
<li>Requirements: an atmospheric model, local atmospheric visibility and image altitude</li>
<li>Change digital brightness values into scaled surface reflectance</li>
</ul></li>
<li><p>Empirical line correction</p>
<p>Steps:</p>
<ul>
<li>Using a filed spectrometer,which require measurements at the same time as the satellite overpass</li>
<li>Then use this measurements in linear regression against the satellite data raw digital number.</li>
</ul></li>
</ol>
</section>
<section id="orthorectification-correction" class="level4" data-number="3.1.1.3">
<h4 data-number="3.1.1.3" class="anchored" data-anchor-id="orthorectification-correction"><span class="header-section-number">3.1.1.3</span> Orthorectification Correction</h4>
<p><strong>Causes:</strong> a systematic sensor and platform-induced geometry errors, which introduce terrain distortions when the sensor is not pointing directly at the Nadir location of the sensor.</p>
<p><strong>Solution:</strong></p>
<ol type="1">
<li><p>Cosine correction</p></li>
<li><p>Minnaert correction</p></li>
<li><p>Statistical Empirical correction</p></li>
<li><p>C Correction (advancing the Cosine)</p></li>
</ol>
</section>
<section id="radiometric-calibration" class="level4" data-number="3.1.1.4">
<h4 data-number="3.1.1.4" class="anchored" data-anchor-id="radiometric-calibration"><span class="header-section-number">3.1.1.4</span> Radiometric Calibration</h4>
<p><strong>Causes:</strong> sensors capture images brightness and distributed as a Digital Number(DN), which allows for efficient storage but has no units.</p>
<p><strong>Solution:</strong></p>
<p>DN to spectral radiance</p>
</section>
</section>
<section id="data-joining-and-enhancement" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="data-joining-and-enhancement"><span class="header-section-number">3.1.2</span> Data Joining and Enhancement</h3>
<section id="data-joining" class="level4" data-number="3.1.2.1">
<h4 data-number="3.1.2.1" class="anchored" data-anchor-id="data-joining"><span class="header-section-number">3.1.2.1</span> Data Joining</h4>
<p><strong>Mosaicking:</strong></p>
<ul>
<li><p>seamless image: the final image, images feathered together</p></li>
<li><p>seamline: the dividing line between the base image and ‘other’ or second image</p></li>
<li><p>feathering: give similar brightness values of the two images.</p></li>
</ul>
</section>
<section id="image-enhancement" class="level4" data-number="3.1.2.2">
<h4 data-number="3.1.2.2" class="anchored" data-anchor-id="image-enhancement"><span class="header-section-number">3.1.2.2</span> Image Enhancement</h4>
<p><strong>Contrast enhancement:</strong> Images usually do not have good contrast. The methods: min-max, percentage linear and standard deviation, piecewise linear contrast stretch</p>
<p><strong>Other enhancements:</strong></p>
<ul>
<li><p>Ratio</p></li>
<li><p>Filtering</p>
<ul>
<li><p>Low pass or low frequency (averages the surrounding pixels)</p></li>
<li><p>High pass or high frequency - enhance local variations</p></li>
</ul></li>
<li><p>PCA(Principal Component Analysis): Transform multi-spectral data into uncorrelated and smaller dataset, and reduce future computation</p></li>
<li><p>Texture: Spatial variation of gray values</p></li>
<li><p>fusion: Fusing data from multiple sensors / sources together</p></li>
</ul>
</section>
</section>
</section>
<section id="application" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="application"><span class="header-section-number">3.2</span> Application</h2>
<p>As the influx of earth observation data enable use to closely monitor the environmental status at various scales<span class="citation" data-cites="pekel2016">(<a href="references.html#ref-pekel2016" role="doc-biblioref">Pekel et al. 2016</a>)</span>, the usage complexity and volume of data would be easily overwhelming<span class="citation" data-cites="frantz2019">(<a href="references.html#ref-frantz2019" role="doc-biblioref">Frantz 2019</a>)</span>. Therefore, the earth observation data are in urgent to be pre-processed for immediate analysis, which is</p>
<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD <em>Analysis Ready Data</em></p>
</section>
<section id="mostly-used-to-describe-radiometrically-and-geometrically-consistent-data-that-include-cloud-and-other-poor-quality-observation-flags-for-filtering-data-prior-to-analysisdwyer2018" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> : <em>mostly used to describe radiometrically and geometrically consistent data that include cloud and other poor-quality observation flags for filtering data prior to analysis<span class="citation" data-cites="dwyer2018">(<a href="references.html#ref-dwyer2018" role="doc-biblioref">Dwyer et al. 2018</a>)</span></em></h1>
<dl>
<dt>Analysis Ready Data</dt>
<dd>
<p>mostly used to describe radiometrically and geometrically consistent data that include cloud and other poor-quality observation flags for filtering data prior to analysis<span class="citation" data-cites="dwyer2018">(<a href="references.html#ref-dwyer2018" role="doc-biblioref">Dwyer et al. 2018</a>)</span></p>
</dd>
</dl>
<p>However, when the ARD dataset was still not common to us all, we still needed to do corrections with remote sensing images. Otherwise, there would be significant impacts on our research. And below are <strong>the applications and operations of corrections in research</strong>.</p>
<p>In <span class="citation" data-cites="hadjimitsis2010">Hadjimitsis et al. (<a href="references.html#ref-hadjimitsis2010" role="doc-biblioref">2010</a>)</span>’s work, to evaluate the impacts of atmospheric correction on the agricultural application(detailly, the calculation of vegetation indices), they finished the geometric correction, radiometric correction at Yeroskipou area in Paphos district (the south-west area of Cyprus).</p>
<p>Firstly, the images were geometrically corrected and geo-referenced to the World Geodetic System’84 (WGS 84/UTM) projection system using a suitable number of identifiable ground control points. Then they used a second order polynomial transformation and kept the RMSE smaller than 1 pixel.</p>
<p>As for radiometric correction, as usual, they converted Digital Numbers(DN) to units of radiance by using standard calibration values. Then, the darkest pixel atmospheric correction method (also termed as histogram minimum method) was applied. To calibrate the at-satellite radiance values in each spectral band for the study area, a dark target (e.g.&nbsp;a water dam) was carefully chosen. The average radiance value of the dark target was then subtracted from each at-satellite radiance value in every spectral band.</p>
<p>Finally, they tested the impact of atmospheric effects on (a) the calculation of vegetation indices; (b) comparison between at-satellite reﬂectance and spectro-radiometric values; and (c) the calculation of real daily evapotranspiration.</p>
<p>Ten Landsat TM/ETM+ images were utilized to assess the impact of atmospheric correction on the accuracy of vegetation indices and evapotranspiration estimates. The results indicate that atmospheric effects must be taken into account for the calculation of DVI, NDVI, SAVI, and MSAVI indices.</p>
<p>Even the availability of ARD improve efficieny for research, some processing is still necessary. It is stated that the variability in data availability across space and time, along with partial incompleteness caused by clouds, acquisition orbits, and observation scenarios, necessitates the use of specialized algorithms or an additional round of processing. This is required to generate spatial completeness and temporal equidistance, ensuring that the data is ready for analysis<span class="citation" data-cites="frantz2019">(<a href="references.html#ref-frantz2019" role="doc-biblioref">Frantz 2019</a>)</span>. Therefore, it is cruicial to have highly analysis ready data(<strong>hARD</strong>) and <strong>hARD+</strong>, see as figure below</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/week3-ARD.png" class="img-fluid figure-img" width="586"></p>
</figure>
</div>
<section id="reflection" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="reflection"><span class="header-section-number">4.1</span> Reflection</h2>
<ul>
<li></li>
</ul>


<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography" style="display: none">
<div id="ref-dwyer2018" class="csl-entry" role="doc-biblioentry">
Dwyer, John L., David P. Roy, Brian Sauer, Calli B. Jenkerson, Hankui K. Zhang, and Leo Lymburner. 2018. <span>“Analysis Ready Data: Enabling Analysis of the Landsat Archive.”</span> <em>Remote Sensing</em> 10 (9): 1363. <a href="https://doi.org/10.3390/rs10091363">https://doi.org/10.3390/rs10091363</a>.
</div>
<div id="ref-frantz2019" class="csl-entry" role="doc-biblioentry">
Frantz, David. 2019. <span>“FORCE<span></span>Landsat + Sentinel-2 Analysis Ready Data and Beyond.”</span> <em>Remote Sensing</em> 11 (9): 1124. <a href="https://doi.org/10.3390/rs11091124">https://doi.org/10.3390/rs11091124</a>.
</div>
<div id="ref-hadjimitsis2010" class="csl-entry" role="doc-biblioentry">
Hadjimitsis, D. G., G. Papadavid, A. Agapiou, K. Themistocleous, M. G. Hadjimitsis, A. Retalis, S. Michaelides, N. Chrysoulakis, L. Toulios, and C. R. I. Clayton. 2010. <span>“Atmospheric Correction for Satellite Remotely Sensed Data Intended for Agricultural Applications: Impact on Vegetation Indices.”</span> <em>Natural Hazards and Earth System Sciences</em> 10 (1): 89–95. <a href="https://doi.org/10.5194/nhess-10-89-2010">https://doi.org/10.5194/nhess-10-89-2010</a>.
</div>
<div id="ref-livingt" class="csl-entry" role="doc-biblioentry">
<span>“Living Textbook | Relative Atmospheric Correction | by ITC, University of Twente.”</span> n.d. <a href="https://ltb.itc.utwente.nl/498/concept/81688">https://ltb.itc.utwente.nl/498/concept/81688</a>.
</div>
<div id="ref-pekel2016" class="csl-entry" role="doc-biblioentry">
Pekel, Jean-François, Andrew Cottam, Noel Gorelick, and Alan S. Belward. 2016. <span>“High-Resolution Mapping of Global Surface Water and Its Long-Term Changes.”</span> <em>Nature</em> 540 (7633): 418–22. <a href="https://doi.org/10.1038/nature20584">https://doi.org/10.1038/nature20584</a>.
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Week2-portfolio.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Portfolio</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Week4-policy.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Policy</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>